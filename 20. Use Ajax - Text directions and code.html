<p>Update the form submission code to submit the request via ajax:</p>

<p>&lt;div id="stock-lookup"&gt;<br>&nbsp; &lt;%= form_tag search_stocks_path, remote: true, method: :get,&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;id: "stock-lookup-form" do %&gt;<br>&nbsp; &nbsp; &lt;div class="form-group row no-padding text-center col-md-12"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;div class="col-md-10"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;%= text_field_tag :stock, params[:stock],&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;placeholder: "Stock ticker symbol",&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; autofocus: true,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; class: "form-control search-box input-lg" %&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &lt;div class="col-md-2"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;%= button_tag(type: :submit, class: "btn btn-lg btn-success") do %&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa fa-search"&gt;&lt;/i&gt; Look up a stock<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;% end %&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &lt;% end %&gt;<br>&lt;/div&gt;</p>

<p>Also update the code right under it to render the result partial:<br>&lt;div id="results"&gt;<br>&nbsp; &lt;%= render 'users/result' %&gt;<br>&lt;/div&gt;</p>

<p>If using Rails 5 and following the video exactly:<br>&lt;div id="results"&gt;<br>&nbsp; &lt;%= render 'result' %&gt;<br>&lt;/div&gt;</p>

<p>Create a new partial under app/views/users folder and call it _result.html.erb and move the code from that part of the my_portfolio page and paste it there:<br>&lt;% if @stock %&gt;<br>&nbsp; &lt;div class="well results-block"&gt;<br>&nbsp; &nbsp; &lt;strong&gt;Symbol: &lt;/strong&gt; &lt;%= @stock.ticker %&gt;<br>&nbsp; &nbsp; &lt;strong&gt;Name: &lt;/strong&gt; &lt;%= @stock.name %&gt;<br>&nbsp; &nbsp; &lt;strong&gt;Price: &lt;/strong&gt; &lt;%= @stock.last_price %&gt;<br>&nbsp; &lt;/div&gt;<br>&lt;% end %&gt;</p>

<p>Now Rails 4 (Rails 5 follows after this):<br>Update the search action in the stocks controller file to render this partial<br>def search<br>&nbsp; if params[:stock].present?<br>&nbsp; &nbsp; @stock = Stock.new_from_lookup(params[:stock])<br>&nbsp; &nbsp; if @stock<br>&nbsp; &nbsp; &nbsp; render partial: 'users/result'<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; flash[:danger] = "You have entered an incorrect symbol"<br>&nbsp; &nbsp; &nbsp; redirect_to my_portfolio_path<br>&nbsp; &nbsp; end<br>&nbsp; else<br>&nbsp; &nbsp; flash[:danger] = "You have entered an empty search string"<br>&nbsp; &nbsp; redirect_to my_portfolio_path<br>&nbsp; end<br>end</p>

<p>Add some js code to application.js file under app/assets/javascripts folder to handle the result and send it back to the browser:<br>$(document).ready(function(){<br>&nbsp; $('#stock-lookup-form').on('ajax:complete', function(event, data, status){<br>&nbsp; &nbsp; $('#results').html(data.responseText)<br>&nbsp; })<br>})</p>

<p>Now Rails 5 of the same thing (from updating the search action above):<br>Update the stocks controller:</p>

<p>def search<br>&nbsp; if params[:stock].present?<br>&nbsp; &nbsp; @stock = Stock.new_from_lookup(params[:stock])<br>&nbsp; &nbsp; if @stock<br>&nbsp; &nbsp; &nbsp; respond_to do |format|<br>&nbsp; &nbsp; &nbsp; &nbsp; format.js { render partial: 'users/result' }<br>&nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; flash[:danger] = "You have entered an incorrect symbol"<br>&nbsp; &nbsp; &nbsp; redirect_to my_portfolio_path<br>&nbsp; &nbsp; end<br>&nbsp; else<br>&nbsp; &nbsp; flash[:danger] = "You have entered an empty search string"<br>&nbsp; &nbsp; redirect_to my_portfolio_path<br>&nbsp; end<br>end</p>

<p>Create a new js partial, _result.js.erb under the app/views/users folder and fill it in:<br>$('#results').html("&lt;%= j (render 'users/result.html') %&gt;")</p>